<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Mini FF Shooter</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:#111;
    font-family:Arial;
}
#ui{
    position:absolute;
    top:10px;
    left:10px;
    color:white;
    font-size:18px;
}
canvas{display:block;}
</style>
</head>
<body>

<div id="ui">Score: 0</div>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let score = 0;
const ui = document.getElementById("ui");

const player = {
    x: canvas.width/2,
    y: canvas.height/2,
    r: 18,
    speed: 4
};

const keys = {};
const bullets = [];
const enemies = [];

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

canvas.addEventListener("click", e => {
    const angle = Math.atan2(e.clientY - player.y, e.clientX - player.x);
    bullets.push({
        x: player.x,
        y: player.y,
        dx: Math.cos(angle) * 8,
        dy: Math.sin(angle) * 8,
        r: 4
    });
});

function spawnEnemy(){
    let side = Math.floor(Math.random()*4);
    let x,y;
    if(side===0){x=0;y=Math.random()*canvas.height;}
    if(side===1){x=canvas.width;y=Math.random()*canvas.height;}
    if(side===2){x=Math.random()*canvas.width;y=0;}
    if(side===3){x=Math.random()*canvas.width;y=canvas.height;}

    enemies.push({
        x,y,
        r:16,
        speed:1.5
    });
}
setInterval(spawnEnemy, 1200);

function update(){
    // player move
    if(keys["w"]) player.y -= player.speed;
    if(keys["s"]) player.y += player.speed;
    if(keys["a"]) player.x -= player.speed;
    if(keys["d"]) player.x += player.speed;

    // bullets
    bullets.forEach((b,i)=>{
        b.x += b.dx;
        b.y += b.dy;
        if(b.x<0||b.x>canvas.width||b.y<0||b.y>canvas.height){
            bullets.splice(i,1);
        }
    });

    // enemies
    enemies.forEach((e,ei)=>{
        let dx = player.x - e.x;
        let dy = player.y - e.y;
        let dist = Math.hypot(dx,dy);
        e.x += dx/dist * e.speed;
        e.y += dy/dist * e.speed;

        bullets.forEach((b,bi)=>{
            if(Math.hypot(b.x-e.x,b.y-e.y) < e.r){
                enemies.splice(ei,1);
                bullets.splice(bi,1);
                score++;
                ui.innerText = "Score: " + score;
            }
        });
    });
}

function draw(){
    ctx.fillStyle="rgba(0,0,0,0.3)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // player
    ctx.fillStyle="#00ffcc";
    ctx.beginPath();
    ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
    ctx.fill();

    // gun direction
    ctx.strokeStyle="white";
    ctx.beginPath();
    ctx.moveTo(player.x,player.y);
    ctx.lineTo(player.x+25,player.y);
    ctx.stroke();

    // bullets
    ctx.fillStyle="yellow";
    bullets.forEach(b=>{
        ctx.beginPath();
        ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
        ctx.fill();
    });

    // enemies
    ctx.fillStyle="red";
    enemies.forEach(e=>{
        ctx.beginPath();
        ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
        ctx.fill();
    });
}

function loop(){
    update();
    draw();
    requestAnimationFrame(loop);
}
loop();

window.onresize = ()=>{
    canvas.width = innerWidth;
    canvas.height = innerHeight;
};
</script>

</body>
</html>